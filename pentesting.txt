-----VIRTUAL MACHINES
Virtual box
-Kali Linux
-Metasploitable
-Windows 10 



-----TCP/IP MODEL
Aplication
Trasport
Internet
Link


-----ROUTING - Installin Debian in virtual box

-Router 1
    name: Router1
    512 mb 
    create virtual hard disk now 
    vdi
    dinamically allocated
    8gb

-configuration
    system > processor: enable PAE/NX
    storage: load debian image

-start
    not select desktop environment
    select ssh server
    power off machine 

-configuration
    network > adapter 1 > internal network
        name: internal-10
    network > adapter 2 > internal network
        name: internal-100

ls /sys/class/net/          check the network interfaces tha are cofigured

-nano /etc/network/interfaces
    auto enp0s3
    iface enp0s3 inet static
        address 192.168.10.254
        netmask 255.255.255.0

    auto enp0s8
    iface enp0s8 inet static
        address 192.168.100.1
        netmask 255.255.255.0
        ctrl x to exit

    cat /etc/network/interfaces     check the modified file
    shutdown -h now                 shutdown the virtual machine
    restart machine


-----CLONING MACHINE - 2nd ROUTER 

-Router 2
    name it Router2 and check the reset mac address box
    linked clone

    network > adapter1
        change internal-10 for 100
    network > adapter2 
        change internal-100 for 20
    start
    login as root user

nano /etc/network/interfaces
    auto enp0s3
    iface enp0s3 inet static
        address 192.168.100.2
        netmask 255.255.255.0

    auto enp0s8
    iface enp0s8 inet static
        address 192.168.20.254
        netmask 255.255.255.0
        ctrl x to exit

nano /etc/hosts
    change the hostname to Router2 
nano /etc/hostname 
    change the hostname to Router2 
reboot 

-start the original router
-in Router2 
    ping 192.168.100.2  okk
    ping 192.168.10.254 no connectivity yet 



-----CONFIGURING ROUTES     KALI>>> ROUTER1 --- ROUTER2 <<< METASPLOITABLE

-Connect the Kali machine to the Metasploitable machine through the 2 routers

-Kali machine > configuration > network >adapter1
    Internal network
        name: internal 10

-Metasploitable machine > configuration > network > adapter1
    Internal network
        name: internal 20

start both machines
ip route show           it show the routes configured

-In Router1 
    ip route add 192.168.20.0/24 via 192.168.100.2 dev enp0s8
-In Router2
    ip route add 192.168.10.0/24 via 192.168.100.1 dev enp0s3

-start kali machine 
edit connections > ipv4 > manual
    address 192.168.10.10       segment ip address
    netmask 255.255.255.0       24 mask
    gateway 192.168.10.254      this was configured for router #1
save and restart ethernet connection

Kali termninal
    ifconfig
    ping 192.168.10.254         connection to the router1
    ping 192.168.100.2          *no connectivity yet


-Active packet routing
Router1
    nano /proc/sys/net/ipv4/ip_forward
        change 0 for 1
Router2
    nano /proc/sys/net/ipv4/ip_forward
        change 0 for 1

    ping 192.168.100.2          *there is connectivity now


-Metasploitable
    login with: msfadmin, and password: msfmadmin
    sudo su 
-nano /etc/network/interfaces
    auto eth0
    iface eth0 inet static
        address 192.168.20.34
        netmask 255.255.255.0
        network 192.168.20.0
        broadcast 192.168.20.255
        gateway 192.168.20.254

reboot 
ping 192.168.10.10      check connection to kali machine 

*******
To make the route permanent, you'll need to add it to the network configuration file, 
    with the "up" parameter preceding it, like so:

up ip route add 192.168.20.0/24 via 192.168.100.2 dev enp0s8

To make routing permanent, you must edit the /etc/sysctl.conf file and add the line:

net.ipv4.ip_forward = 1

In many cases this line may already exist in the file and you only need to remove the comment identifier (#).

                                    
                                    
                                    ------------P E N T E S T I N G-----------------
RECOGNITION

------WHOIS 
Is a request/response-based TCP protocol for querying a database to determine the owner of a domain name or IP address on the Internet.

-Kali 
    settings > network > adapter1 >attached to 'NAT'
    or create a linked clone to modify the configuration without losing the first configuration

who is unam.mx
who is platzi.com


-----NETCRAFT
offers market share analysis of web servers and hosting, including the detection of the type of web server and operating system.

-----HTTRACK
if not installed
    sudo apt install httrack 
clone a website
    httrack www.somesite.com -O copy/

man httrack to see more flags

-----
